var at=Object.defineProperty;var ct=(i,t,e)=>t in i?at(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var n=(i,t,e)=>ct(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function z(i){return Math.abs(Math.floor(i))}function E(i,t){return Math.random()*(t-i)+i}function m(i,t){return Math.floor(E(i,t+1))}function $(i,t,e,s){const o=Math.pow;return Math.sqrt(o(i-e,2)+o(t-s,2))}function A(i,t,e=1){if(i>360||i<0)throw new Error(`Expected hue 0-360 range, got \`${i}\``);if(t>100||t<0)throw new Error(`Expected lightness 0-100 range, got \`${t}\``);if(e>1||e<0)throw new Error(`Expected alpha 0-1 range, got \`${e}\``);return`hsla(${i}, 100%, ${t}%, ${e})`}const W=i=>{if(typeof i=="object"&&i!==null){if(typeof Object.getPrototypeOf=="function"){const t=Object.getPrototypeOf(i);return t===Object.prototype||t===null}return Object.prototype.toString.call(i)==="[object Object]"}return!1},lt=["__proto__","constructor","prototype"],q=(...i)=>i.reduce((t,e)=>(Object.keys(e).forEach(s=>{lt.includes(s)||(Array.isArray(t[s])&&Array.isArray(e[s])?t[s]=e[s]:W(t[s])&&W(e[s])?t[s]=q(t[s],e[s]):t[s]=e[s])}),t),{});function ht(i,t){let e;return(...s)=>{e&&clearTimeout(e),e=setTimeout(()=>i(...s),t)}}class ut{constructor({x:t,y:e,ctx:s,hue:o,decay:a,gravity:l,friction:c,brightness:r,flickering:h,lineWidth:p,explosionLength:f}){n(this,"x");n(this,"y");n(this,"ctx");n(this,"hue");n(this,"friction");n(this,"gravity");n(this,"flickering");n(this,"lineWidth");n(this,"explosionLength");n(this,"angle");n(this,"speed");n(this,"brightness");n(this,"coordinates",[]);n(this,"decay");n(this,"alpha",1);for(this.x=t,this.y=e,this.ctx=s,this.hue=o,this.gravity=l,this.friction=c,this.flickering=h,this.lineWidth=p,this.explosionLength=f,this.angle=E(0,Math.PI*2),this.speed=m(1,10),this.brightness=m(r.min,r.max),this.decay=E(a.min,a.max);this.explosionLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&t()}draw(){const t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.fillStyle=A(this.hue,this.brightness,this.alpha),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=A(this.hue,this.flickering?E(0,this.brightness):this.brightness,this.alpha),this.ctx.stroke()}}class dt{constructor(t,e){n(this,"active",!1);n(this,"x");n(this,"y");this.options=t,this.canvas=e,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=this.pointerMove.bind(this)}get mouseOptions(){return this.options.mouse}mount(){this.canvas.addEventListener("pointerdown",this.pointerDown),this.canvas.addEventListener("pointerup",this.pointerUp),this.canvas.addEventListener("pointermove",this.pointerMove)}unmount(){this.canvas.removeEventListener("pointerdown",this.pointerDown),this.canvas.removeEventListener("pointerup",this.pointerUp),this.canvas.removeEventListener("pointermove",this.pointerMove)}usePointer(t,e){const{click:s,move:o}=this.mouseOptions;(s||o)&&(this.x=t.pageX-this.canvas.offsetLeft,this.y=t.pageY-this.canvas.offsetTop,this.active=e)}pointerDown(t){this.usePointer(t,this.mouseOptions.click)}pointerUp(t){this.usePointer(t,!1)}pointerMove(t){this.usePointer(t,this.active)}}class pt{constructor(){n(this,"hue");n(this,"rocketsPoint");n(this,"opacity");n(this,"acceleration");n(this,"friction");n(this,"gravity");n(this,"particles");n(this,"explosion");n(this,"mouse");n(this,"boundaries");n(this,"sound");n(this,"delay");n(this,"brightness");n(this,"decay");n(this,"flickering");n(this,"intensity");n(this,"traceLength");n(this,"traceSpeed");n(this,"lineWidth");n(this,"lineStyle");n(this,"autoresize");this.autoresize=!0,this.lineStyle="round",this.flickering=50,this.traceLength=3,this.traceSpeed=10,this.intensity=30,this.explosion=5,this.gravity=1.5,this.opacity=.5,this.particles=50,this.friction=.95,this.acceleration=1.05,this.hue={min:0,max:360},this.rocketsPoint={min:50,max:50},this.lineWidth={explosion:{min:1,max:3},trace:{min:1,max:2}},this.mouse={click:!1,move:!1,max:1},this.delay={min:30,max:60},this.brightness={min:50,max:80},this.decay={min:.015,max:.03},this.sound={enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},this.boundaries={debug:!1,height:0,width:0,x:50,y:50}}update(t){Object.assign(this,q(this,t))}}class ft{constructor(t,e){n(this,"tick",0);n(this,"rafId",0);n(this,"fps",60);n(this,"tolerance",.1);n(this,"now");this.options=t,this.render=e}mount(){this.now=performance.now();const t=1e3/this.fps,e=s=>{this.rafId=requestAnimationFrame(e);const o=s-this.now;o>=t-this.tolerance&&(this.render(),this.now=s-o%t,this.tick+=o*(this.options.intensity*Math.PI)/1e3)};this.rafId=requestAnimationFrame(e)}unmount(){cancelAnimationFrame(this.rafId)}}class mt{constructor(t,e,s){n(this,"resizer");this.options=t,this.updateSize=e,this.container=s}mount(){if(!this.resizer){const t=ht(()=>this.updateSize(),100);this.resizer=new ResizeObserver(t)}this.options.autoresize&&this.resizer.observe(this.container)}unmount(){this.resizer&&this.resizer.unobserve(this.container)}}class gt{constructor(t){n(this,"buffers",[]);n(this,"audioContext");n(this,"onInit",!1);this.options=t,this.init()}get isEnabled(){return this.options.sound.enabled}get soundOptions(){return this.options.sound}init(){!this.onInit&&this.isEnabled&&(this.onInit=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSounds())}async loadSounds(){for(const t of this.soundOptions.files){const e=await(await fetch(t)).arrayBuffer();this.audioContext.decodeAudioData(e).then(s=>{this.buffers.push(s)}).catch(s=>{throw s})}}play(){if(this.isEnabled&&this.buffers.length){const t=this.audioContext.createBufferSource(),e=this.buffers[m(0,this.buffers.length-1)],s=this.audioContext.createGain();t.buffer=e,s.gain.value=E(this.soundOptions.volume.min/100,this.soundOptions.volume.max/100),s.connect(this.audioContext.destination),t.connect(s),t.start(0)}else this.init()}}class yt{constructor({x:t,y:e,dx:s,dy:o,ctx:a,hue:l,speed:c,traceLength:r,acceleration:h}){n(this,"x");n(this,"y");n(this,"sx");n(this,"sy");n(this,"dx");n(this,"dy");n(this,"ctx");n(this,"hue");n(this,"speed");n(this,"acceleration");n(this,"traceLength");n(this,"totalDistance");n(this,"angle");n(this,"brightness");n(this,"coordinates",[]);n(this,"currentDistance",0);for(this.x=t,this.y=e,this.sx=t,this.sy=e,this.dx=s,this.dy=o,this.ctx=a,this.hue=l,this.speed=c,this.traceLength=r,this.acceleration=h,this.totalDistance=$(t,e,s,o),this.angle=Math.atan2(o-e,s-t),this.brightness=m(50,70);this.traceLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;const e=Math.cos(this.angle)*this.speed,s=Math.sin(this.angle)*this.speed;this.currentDistance=$(this.sx,this.sy,this.x+e,this.y+s),this.currentDistance>=this.totalDistance?t(this.dx,this.dy,this.hue):(this.x+=e,this.y+=s)}draw(){const t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=A(this.hue,this.brightness),this.ctx.stroke()}}class X{constructor(t,e={}){n(this,"target");n(this,"container");n(this,"canvas");n(this,"ctx");n(this,"width");n(this,"height");n(this,"traces",[]);n(this,"explosions",[]);n(this,"waitStopRaf");n(this,"running",!1);n(this,"opts");n(this,"sound");n(this,"resize");n(this,"mouse");n(this,"raf");this.target=t,this.container=t,this.opts=new pt,this.createCanvas(this.target),this.updateOptions(e),this.sound=new gt(this.opts),this.resize=new mt(this.opts,this.updateSize.bind(this),this.container),this.mouse=new dt(this.opts,this.canvas),this.raf=new ft(this.opts,this.render.bind(this))}get isRunning(){return this.running}get version(){return"2.10.8"}get currentOptions(){return this.opts}start(){this.running||(this.canvas.isConnected||this.createCanvas(this.target),this.running=!0,this.resize.mount(),this.mouse.mount(),this.raf.mount())}stop(t=!1){this.running&&(this.running=!1,this.resize.unmount(),this.mouse.unmount(),this.raf.unmount(),this.clear(),t&&this.canvas.remove())}async waitStop(t){if(this.running)return new Promise(e=>{this.waitStopRaf=()=>{this.waitStopRaf&&(requestAnimationFrame(this.waitStopRaf),!this.traces.length&&!this.explosions.length&&(this.waitStopRaf=null,this.stop(t),e()))},this.waitStopRaf()})}pause(){this.running=!this.running,this.running?this.raf.mount():this.raf.unmount()}clear(){this.ctx&&(this.traces=[],this.explosions=[],this.ctx.clearRect(0,0,this.width,this.height))}launch(t=1){for(let e=0;e<t;e++)this.createTrace();this.waitStopRaf||(this.start(),this.waitStop())}updateOptions(t){this.opts.update(t)}updateSize({width:t=this.container.clientWidth,height:e=this.container.clientHeight}={}){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.updateBoundaries({...this.opts.boundaries,width:t,height:e})}updateBoundaries(t){this.updateOptions({boundaries:t})}createCanvas(t){t instanceof HTMLCanvasElement?(t.isConnected||document.body.append(t),this.canvas=t):(this.canvas=document.createElement("canvas"),this.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.updateSize()}render(){if(!this.ctx||!this.running)return;const{opacity:t,lineStyle:e,lineWidth:s}=this.opts;this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0, ${t})`,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="lighter",this.ctx.lineCap=e,this.ctx.lineJoin="round",this.ctx.lineWidth=E(s.trace.min,s.trace.max),this.initTrace(),this.drawTrace(),this.drawExplosion()}createTrace(){const{hue:t,rocketsPoint:e,boundaries:s,traceLength:o,traceSpeed:a,acceleration:l,mouse:c}=this.opts;this.traces.push(new yt({x:this.width*m(e.min,e.max)/100,y:this.height,dx:this.mouse.x&&c.move||this.mouse.active?this.mouse.x:m(s.x,s.width-s.x*2),dy:this.mouse.y&&c.move||this.mouse.active?this.mouse.y:m(s.y,s.height*.5),ctx:this.ctx,hue:m(t.min,t.max),speed:a,acceleration:l,traceLength:z(o)}))}initTrace(){if(this.waitStopRaf)return;const{delay:t,mouse:e}=this.opts;(this.raf.tick>m(t.min,t.max)||this.mouse.active&&e.max>this.traces.length)&&(this.createTrace(),this.raf.tick=0)}drawTrace(){let t=this.traces.length;for(;t--;)this.traces[t].draw(),this.traces[t].update((e,s,o)=>{this.initExplosion(e,s,o),this.sound.play(),this.traces.splice(t,1)})}initExplosion(t,e,s){const{particles:o,flickering:a,lineWidth:l,explosion:c,brightness:r,friction:h,gravity:p,decay:f}=this.opts;let R=z(o);for(;R--;)this.explosions.push(new ut({x:t,y:e,ctx:this.ctx,hue:s,friction:h,gravity:p,flickering:m(0,100)<=a,lineWidth:E(l.explosion.min,l.explosion.max),explosionLength:z(c),brightness:r,decay:f}))}drawExplosion(){let t=this.explosions.length;for(;t--;)this.explosions[t].draw(),this.explosions[t].update(()=>{this.explosions.splice(t,1)})}}const xt={BASE_URL:"/countdown-app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},v=document.querySelector("h1"),O=document.getElementById("timezone"),Y=document.getElementById("days"),j=document.getElementById("hours"),_=document.getElementById("minutes"),N=document.getElementById("seconds"),wt=Intl.DateTimeFormat().resolvedOptions().timeZone;O.textContent=`Detected time zone: ${wt}`;function I(i){return i.toString().padStart(2,"0")}function w(i,t){const e=i.querySelector(".top"),s=i.querySelector(".bottom");e.textContent!==t&&(e.textContent=t,s.textContent=t,i.classList.add("flip"),setTimeout(()=>{e.textContent=t,s.textContent=t,i.classList.remove("flip")},500))}let b=null,T=null,d=null,H=null,P=null,k=null,u=null;const g={hue:{min:0,max:360},delay:{min:25,max:55},rocketsPoint:{min:0,max:100},acceleration:1,friction:.97,gravity:1.5,particles:80,explosion:5,autoresize:!0,brightness:{min:50,max:80},decay:{min:.015,max:.03},sound:{enabled:!0,files:["/countdown-app/assets/explosion0.mp3","/countdown-app/assets/explosion1.mp3","/countdown-app/assets/explosion2.mp3"],volume:{min:4,max:8}}};(()=>{try{const i=xt&&"/countdown-app/"||"/";g.sound&&Array.isArray(g.sound.files)&&(g.sound.files=g.sound.files.map(t=>{if(t.startsWith(i))return t;const e=t.replace(/^\//,"");return(i.endsWith("/")?i:i+"/")+e}))}catch{}})();function G(){try{const i=window.AudioContext||window.webkitAudioContext;if(!i)return;const t=new i;t.state==="suspended"?t.resume().then(()=>{t.close(),console.debug("AudioContext resumed to allow fireworks sounds")}).catch(()=>{}):t.close()}catch{}}async function K(i){if(!i||!i.length)return[];const t=[];for(const e of i)try{if((await fetch(e,{method:"HEAD"})).ok){t.push(e);continue}(await fetch(e,{method:"GET"})).ok&&t.push(e)}catch{}return t}async function vt(i){if(!i||!i.length)return null;try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return null;const e=new t,s=[],o=[];for(const a of i)try{console.debug("[fireworks] Fetching sound file:",a);const l=await fetch(a);if(!l.ok){console.warn(`[fireworks] Sound file not found or not ok: ${a}`);continue}const c=await l.arrayBuffer();try{const r=await new Promise((h,p)=>e.decodeAudioData(c,h,p));s.push(r),o.push(a),console.debug(`[fireworks] Decoded sound file OK: ${a}`)}catch(r){console.error(`[fireworks] Unable to decode audio data for: ${a}`,r),alert(`No se pudo decodificar el archivo de sonido: ${a}
Â¿Es un MP3 vÃ¡lido?`);continue}}catch(l){console.error(`[fireworks] Error fetching sound file: ${a}`,l);continue}if(!s.length){try{e.close()}catch{}return null}return{urls:o,buffers:s,audioContext:e}}catch(t){return console.error("[fireworks] Error in fetchAndDecodeSoundFiles",t),null}}let C=null,J=null,V=null,S=null,Z=null,M=null,Q=null,L;function tt(){const t=new Date().getFullYear()+1;L=new Date(`${t}-01-01T00:00:00`)}tt();function bt(){if(b)return;const i=L.getFullYear();v&&(v.textContent=`Happy New Year ${i}`),C=document.getElementById("countdown"),C&&(J=C.style.display||null,C.style.display="none"),O&&(V=O.style.display||null,O.style.display="none");const t=document.createElement("canvas");t.id="fireworks-canvas",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.zIndex="9999",t.style.pointerEvents="none",document.body.appendChild(t),d=document.createElement("div"),d.id="celebration-overlay",d.style.position="fixed",d.style.inset="0",d.style.zIndex="10000",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.background="transparent",d.style.pointerEvents="none";const e=document.createElement("div");e.style.color="white",e.style.fontFamily="Inter, system-ui, sans-serif",e.style.fontSize="6vw",e.style.fontWeight="800",e.style.letterSpacing="0.02em";const s=L.getFullYear();e.textContent=`ðŸŽ‰ Happy New Year ${s} ! ðŸŽ‰`,d.appendChild(e),document.body.appendChild(d),v&&(H=v.style.display||null,v.style.display="none"),S=document.getElementById("minigame-container"),S&&(Z=S.style.display||null,S.style.display="none"),M=document.getElementById("game-controls-container"),M&&(Q=M.style.display||null,M.style.display="none"),b=new X(t,Object.assign({},g,{mouse:{click:!1,move:!1,max:0}})),b.start(),(async()=>{var a,l;try{G();const c=b,r=(a=g.sound)==null?void 0:a.files,h=await K(r);h.length>0?(c.updateOptions({sound:{enabled:!0,files:h,volume:(l=g.sound)==null?void 0:l.volume}}),c&&c.sound&&typeof c.sound.init=="function"&&(c.sound.init(),console.debug("Prefetching celebration sounds"))):(c.updateOptions({sound:{enabled:!1}}),console.debug("No valid fireworks sound files found; sound disabled"))}catch(c){console.warn("Could not prefetch celebration sounds",c)}})().catch(()=>{});const o=2*60*60*1e3;T=window.setTimeout(()=>Et(!0),o)}function Et(i=!1){b&&(b.stop(),b=null);const t=document.getElementById("fireworks-canvas");t&&t.remove(),d&&(d.remove(),d=null),T&&(clearTimeout(T),T=null),i&&(tt(),F(),C&&(C.style.display=J||""),O&&(O.style.display=V||""),v&&(v.style.display=H||""),S&&(S.style.display=Z||""),M&&(M.style.display=Q||""))}function F(){const i=new Date,t=L.getTime()-i.getTime();if(t<=0){w(Y,"00"),w(j,"00"),w(_,"00"),w(N,"00"),bt();return}const e=Math.floor(t/(1e3*60*60*24)),s=Math.floor(t/(1e3*60*60)%24),o=Math.floor(t/(1e3*60)%60),a=Math.floor(t/1e3%60);w(Y,I(e)),w(j,I(s)),w(_,I(o)),w(N,I(a))}F();setInterval(F,1e3);const et=document.getElementById("minigame-container"),nt=document.getElementById("score"),it=document.getElementById("start-btn"),st=document.getElementById("pause-btn"),ot=document.getElementById("restart-btn"),U=["ðŸŽ‰","ðŸ¾","âœ¨","ðŸ¥‚","ðŸŽ†","ðŸ¥³"];let D=0;const kt=2e3;let y,x="stopped";function B(){it.disabled=x==="running",st.disabled=x!=="running",ot.disabled=x==="stopped"}function Ct(){x!=="running"&&(x="running",B(),y&&clearInterval(y),y=setInterval(It,750))}function St(){x==="running"&&(x="paused",B(),y&&(clearInterval(y),y=void 0))}function Mt(){y&&clearInterval(y),y=void 0,et.querySelectorAll(".celebration-bubble").forEach(i=>i.remove()),D=0,nt.textContent=D.toString(),x="stopped",B()}it.addEventListener("click",Ct);st.addEventListener("click",St);ot.addEventListener("click",Mt);P=document.getElementById("fireworks-floating-btn");P&&P.addEventListener("click",()=>Ot());function Ot(){const i=window.innerWidth,t=window.innerHeight,e=Math.max(40,Math.min(i-40,Math.random()*i*.8+i*.1)),o=Math.random()<.6?Math.max(60,Math.min(t-60,t*(.1+Math.random()*.35))):Math.max(60,Math.min(t-60,t*(.45+Math.random()*.35)));u?(u.width=i,u.height=t):(u=document.createElement("canvas"),u.style.position="fixed",u.style.left="0",u.style.top="0",u.width=i,u.height=t,u.style.pointerEvents="none",u.style.zIndex="11000",u.id="manual-fireworks-canvas",document.body.appendChild(u));const a=Object.assign({},g,{delay:{min:9999999,max:9999999},mouse:{click:!0,move:!1,max:0}});if(!k){k=new X(u,a),k.start(),(async()=>{var l,c;try{G();const r=k,h=(l=g.sound)==null?void 0:l.files,p=await K(h);if(p.length>0){const f=await vt(p);if(f&&f.buffers&&f.buffers.length){r.updateOptions({sound:{enabled:!0,files:f.urls,volume:(c=g.sound)==null?void 0:c.volume}});try{r.sound.audioContext=f.audioContext,r.sound.buffers=f.buffers,r.sound.onInit=!0,console.debug("Injected decoded manual fireworks sounds into instance")}catch{try{r&&r.sound&&typeof r.sound.init=="function"&&r.sound.init(),console.debug("Fallback: called inst.sound.init() for manual instance")}catch(rt){console.warn("Could not initialize manual fireworks sounds",rt)}}}else r.updateOptions({sound:{enabled:!1}}),console.debug("No valid manual sound buffers decoded; sound disabled")}else r.updateOptions({sound:{enabled:!1}}),console.debug("No valid manual fireworks sound files found; sound disabled")}catch(r){console.warn("Could not prefetch manual sounds",r)}})().catch(()=>{}),requestAnimationFrame(()=>{try{const l=u.getBoundingClientRect(),c=Math.round(l.left+e),r=Math.round(l.top+o);try{const h=k;if(h&&h.mouse&&typeof h.createTrace=="function")h.mouse.pointerDown({pageX:c,pageY:r}),h.createTrace(),h.mouse.pointerUp({pageX:c,pageY:r}),console.debug("Triggered internal createTrace (post-start)",{clientX:c,clientY:r});else{const p=new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:c,clientY:r});u.dispatchEvent(p),window.dispatchEvent(p),console.debug("Dispatched manual fireworks click fallback (post-start)",{clientX:c,clientY:r})}}catch(h){console.error("Error triggering internal createTrace",h)}}catch(l){console.error("Error dispatching post-start click",l)}});return}try{const l=u.getBoundingClientRect(),c=Math.round(l.left+e),r=Math.round(l.top+o);try{const h=k;if(h&&h.mouse&&typeof h.createTrace=="function")h.mouse.pointerDown({pageX:c,pageY:r}),h.createTrace(),h.mouse.pointerUp({pageX:c,pageY:r}),console.debug("Triggered internal createTrace",{clientX:c,clientY:r});else{const p=new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:c,clientY:r});u.dispatchEvent(p),window.dispatchEvent(p),console.debug("Dispatched manual fireworks click fallback",{clientX:c,clientY:r})}}catch(h){console.error("Error triggering internal createTrace",h)}}catch(l){console.error("Error dispatching manual fireworks click",l)}}function It(){if(x!=="running")return;const i=U[Math.floor(Math.random()*U.length)],t=document.createElement("div");t.className="celebration-bubble",t.textContent=i,t.style.left=`${Math.random()*95}%`,t.style.top=`${Math.random()*95}%`,t.addEventListener("click",()=>{D++,nt.textContent=D.toString(),t.remove()}),et.appendChild(t),setTimeout(()=>{t.parentElement&&t.remove()},kt)}B();
